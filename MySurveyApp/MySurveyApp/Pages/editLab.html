
<!DOCTYPE html>
<html lang="en">
<head>
    <title>Edit Lab</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel='stylesheet' href='https://use.fontawesome.com/releases/v5.7.0/css/all.css' integrity='sha384-lZN37f5QGtY3VHgisS14W3ExzMWZxybE1SJSEsQp9S+oqd12jhcu+A56Ebc1zFSJ' crossorigin='anonymous'>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.19/css/jquery.dataTables.min.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.19/css/dataTables.bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/responsive/2.2.3/css/responsive.dataTables.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <link rel="stylesheet" type="text/css" href="//cdn.datatables.net/1.10.19/css/jquery.dataTables.min.css" />
    <script type="text/javascript" src="//cdn.datatables.net/1.10.19/js/jquery.dataTables.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="http://osvaldas.info/examples/main.js"></script>
    <script src="http://osvaldas.info/examples/drop-down-navigation-touch-friendly-and-responsive/doubletaptogo.js"></script>
    <link href="https://fonts.googleapis.com/css?family=Secular+One" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Arimo" rel="stylesheet">
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
    
    <!--date-->
    <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <link rel="stylesheet" href="/resources/demos/style.css">
    <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <!--date-->
    <link href="style.css" rel="stylesheet" />
    <link href="css/style2.css" rel="stylesheet" />
    <script src="../Scripts/ajaxCalls.js"></script>
  
    <script>
        $(document).ready(function () {
            Showlab();
            $("#pForm").submit(f1);
            return false;
        });

        function f1() {
            Editlab();
            return false;
        }

        function Editlab() {

            Lab = {
                Labid: $("#labid").val(),
                Labtopic: $("#topic").val(),
               Labdate: $("#uploaddate").val(),
                Minperson: parseInt($("#minpers").val()),
                Maxperson: parseInt($("#maxpers").val()),
                Labdetails: $("#details").val(),
               Director: $("#director").val(),
               LecId: parseInt($("#lecId").val()),
                Labweight: $("#weight").val(),
                Lablocation: $("#location").val()
              


            }
            lid = Lab.Labid;
           
            ajaxCall("PUT", "../api/editlab/?lid=" + lid, JSON.stringify(Lab), success, error);
        }


        function success(data) {
            swal("עריכה בוצעה", "השינויים נשמרו בהצלחה במערכת", "success");
        }

        function error(err) {
            alert("error");
        }
        function back() {
            window.location.href = "Lecturpage.html";
        }

        function Showlab() {

            l = JSON.parse(localStorage.getItem('l'));

           $("#labid").val(l.LabId),
            $("#topic").val(l.Labtopic),
           $("#uploaddate").val(l.Labdate),
         $("#minpers").val(l.Minperson),
            $("#maxpers").val(l.Maxperson),
             $("#details").val(l.Labdetails),
            $("#director").val(l.Director),
             $("#directorid").val(l.LecId),
            $("#weight").val(l.Labweight),
           $("#location").val(l.Lablocation)
            document.getElementById("labid").disabled = true;
        }
        function deletelab() {



            Lab = {
                LabId: $("#labid").val(),
                Topic: $("#topic").val(),
                Uploaddate: $("#uploaddate").val(),
                Minperson: parseInt($("#minpers").val()),
                Maxperson: parseInt($("#maxpers").val()),
                Director: $("#director").val(),
                LecId: $("#directorid").val(),
                Labweight: parseInt($("#weight").val()),
                Lablocation: $("#location").val(),

            }
            lid = Lab.LabId;

            ajaxCall("PUT", "../api/deletelab/?lid=" + lid, JSON.stringify(Lab), deleteSuccess, deleterror);


        }
        function deleteSuccess(data) {
            swal("מחיקה בוצעה", "הסקר נמחק בהצלחה מהמערכת", "error");
        }

        function deleterror(err) {
            alert("error");
        }

     
        $(function () {
            $("#uploaddate").datepicker();
        });
        $(function () {
            $("#enddate").datepicker();
        });
    </script>
</head>

<body>
    <nav class="navbar navbar-default navbar-header">
        <div class="row">
            <div id="ms1" class="hidden-md hidden-sm hidden-xs">My<span id="ms3">survey</span></div>
            <nav id="nav" role="navigation">

                <ul class="clearfix">

                    <li>
                        <a href=""><span>סטודנטים</span></a>
                        <ul>

                            <li><a href="AddstudentFile.html">רישום סטודנטים למערכת</a></li>
                            <li><a href="">עריכת רשימת סטודנטים</a></li>

                        </ul>
                    </li>

                    <li>
                        <a href=""><span>דוחות</span></a>
                        <ul>
                            <li><a href="StudentReport.html">דו"ח התקדמות סטודנטים</a></li>
                            <li><a href="">דו"ח מעבדה</a></li>
                            <li><a href="">דו"ח שאלון</a></li>
                        </ul>
                    </li>
                    <li>
                        <a href=""><span>מעבדות</span></a>
                        <ul>
                            <li><a href="uploadLabspage.html">הוספת מעבדה למערכת</a></li>
                            <li><a href="showlabs.html">צפייה במעבדות</a></li>

                        </ul>
                    </li>
                    <li id="sa">
                        <a href="UploadSurvey.html">הוספת סקר</a>

                    </li>

                </ul>
                <div id="logout">
                    <a href="Lecturpage.html"><i id="ico" class="fa fa-sign-out"></i></a>
                    <a id="a1" href="Lecturpage.html" class="hidden-md hidden-sm hidden-xs">  <p id="pp2">חזור <br />לדף הבית</p> </a>
                </div>
            </nav>
        </div>
    </nav>




    <div id="all5" class="form-style-5">
        <form id="pForm">
            <fieldset>
                <legend><span class="number">1</span> עריכת מעבדה</legend>
                <h3 class="upload"> קוד מעבדה:</h3>
                <input style="color:black" id="labid" type="text" name="field1" placeholder="קוד מעבדה *">
                <h3 class="upload"> נושא מעבדה:</h3>
                <input style="color:black" id="topic" type="text" name="field2" placeholder="נושא מעבדה *">
                <h3 class="upload"> תאריך המעבדה:</h3>
                <input type="text" id="uploaddate" placeholder="תאריך המעבדה *">
                <h3 class="upload"> מינימום סטודנטים:</h3>
                <input style="color:black" id="minpers" type="text" name="field2" placeholder="מינימום סטודנטים *">
                <h3 class="upload"> מקסימום סטודנטים:</h3>
                <input style="color:black" id="maxpers" type="text" name="field2" placeholder="מקסימום סטודנטים *">
                <h3 class="upload"> פרטי המעבדה:</h3>
                <input style="color:black" id="details" type="text" name="field2" placeholder="פרטי המעבדה *">
                <h3 class="upload"> אחראי מעבדה:</h3>
                <input style="color:black" id="director" type="text" name="field2" placeholder="אחראי מעבדה *">
                <h3 class="upload"> תעודת זהות אחראי מעבדה:</h3>
                <input style="color:black" id="directorid" type="text" name="field2" placeholder="תעודת זהות אחראי מעבדה *">
                <h3 class="upload"> משקל המעבדה:</h3>
                <input style="color:black" id="weight" type="number" step="any" name="field2" placeholder="משקל המעבדה *">
                <h3 class="upload"> מיקום המעבדה:</h3>
                <input style="color:black" id="location" type="text" name="field2" placeholder="מיקום המעבדה *">


            </fieldset>
            <fieldset>
                <legend><span class="number">3</span>  לחץ אישור לשמירת שינויים או מחק שאלון </legend>
            </fieldset>
            <div class="row">
                <i id="deletes" class='fas fa-trash-alt' onclick="deletelab()"></i>

                <input id="sb" type="submit" value="אישור" />

            </div>
            
        </form>
    </div>

</body>
</html>